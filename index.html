<!doctype html>
<html>
<button id="btn" onclick="convert_req();">code</button>
<br>
<br>
<textarea id="log" rows="10" cols="40"></textarea>
<script src="data.js"></script>
<script>
    const log = document.getElementById('log');
    const btn = document.getElementById('btn');
    const text = 'enter code to convert';
    let result = '';
    let last_inp = '100';

    function print(s) {
        log.value = s + '\n' + log.value
    }

    function process_code(code) {
        if (Object.keys(data).includes(code)) {
            return `${code} -> ${data[code]}`;
        }
        // else
        return `${code} : no need to change`;
    }

    function call_req() {
        btn.click();
    }

    function set_req() {
        setTimeout(call_req, 20);
    }

    function convert_req() {
        const s = `${result}\n${text}`;
        const inp = prompt(s, last_inp);
        // console.log(inp);
        if (inp === null || !inp.length) return;
        last_inp = inp;
        result = process_code(inp.trim());
        print(result);
        set_req();
    }

    set_req();
</script>
</html>
